<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nextier Lead Assistant</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="root">
    <!-- Auth Check -->
    <div id="auth-required" class="hidden">
      <div class="auth-container">
        <img src="icons/icon48.png" alt="Nextier" class="logo">
        <h2>Sign In Required</h2>
        <p>Connect to your Nextier account to capture leads and manage campaigns.</p>
        <button id="login-btn" class="btn btn-primary">Sign In to Nextier</button>
      </div>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="hidden">
      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <img src="icons/icon16.png" alt="" class="header-icon">
          <span class="header-title">Nextier</span>
        </div>
        <div class="header-right">
          <span id="user-email" class="user-email"></span>
          <button id="logout-btn" class="btn-icon" title="Sign Out">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- Tabs -->
      <nav class="tabs">
        <button class="tab active" data-tab="capture">Capture</button>
        <button class="tab" data-tab="actions">Quick Actions</button>
        <button class="tab" data-tab="cadences">Cadences</button>
      </nav>

      <!-- Tab: Lead Capture -->
      <div id="tab-capture" class="tab-content active">
        <div class="section">
          <h3>Detected Contact</h3>
          <div id="detected-info" class="detected-info">
            <p class="empty-state">No contact info detected on this page.</p>
          </div>
        </div>

        <form id="capture-form" class="form">
          <div class="form-row">
            <div class="form-group">
              <label>First Name</label>
              <input type="text" id="firstName" placeholder="John">
            </div>
            <div class="form-group">
              <label>Last Name</label>
              <input type="text" id="lastName" placeholder="Doe">
            </div>
          </div>

          <div class="form-group">
            <label>Company</label>
            <input type="text" id="company" placeholder="Acme Corp">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Phone</label>
              <input type="tel" id="phone" placeholder="555-123-4567">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="email" placeholder="john@acme.com">
            </div>
          </div>

          <div class="form-group">
            <label>Add to Campaign</label>
            <select id="campaign">
              <option value="">Select campaign...</option>
            </select>
          </div>

          <button type="submit" id="capture-btn" class="btn btn-primary btn-block">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="17 21 17 13 7 13 7 21"/>
              <polyline points="7 3 7 8 15 8"/>
            </svg>
            Capture Lead
          </button>
        </form>
      </div>

      <!-- Tab: Quick Actions -->
      <div id="tab-actions" class="tab-content">
        <div class="actions-grid">
          <button class="action-btn" id="action-sms">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            <span>Send SMS</span>
          </button>

          <button class="action-btn" id="action-call">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
            <span>Call Lead</span>
          </button>

          <button class="action-btn" id="action-email">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            <span>Send Email</span>
          </button>

          <button class="action-btn" id="action-callback">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            <span>Schedule Callback</span>
          </button>
        </div>

        <!-- SMS Form (Hidden by default) -->
        <div id="sms-form" class="action-form hidden">
          <h3>Send SMS</h3>
          <div class="form-group">
            <label>To</label>
            <input type="tel" id="sms-to" placeholder="Phone number">
          </div>
          <div class="form-group">
            <label>Message</label>
            <textarea id="sms-message" rows="3" placeholder="Enter your message..."></textarea>
          </div>
          <div class="form-actions">
            <button class="btn btn-secondary" id="sms-cancel">Cancel</button>
            <button class="btn btn-primary" id="sms-send">Send SMS</button>
          </div>
        </div>
      </div>

      <!-- Tab: Cadences -->
      <div id="tab-cadences" class="tab-content">
        <div class="section">
          <h3>Active Cadences</h3>
          <div id="cadences-list" class="cadences-list">
            <p class="empty-state">Loading cadences...</p>
          </div>
        </div>

        <div class="section">
          <h3>Add to Cadence</h3>
          <form id="add-cadence-form" class="form">
            <div class="form-group">
              <label>Lead Phone</label>
              <input type="tel" id="cadence-phone" placeholder="Phone number">
            </div>
            <div class="form-group">
              <label>Select Cadence</label>
              <select id="cadence-select">
                <option value="">Choose a cadence...</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Add to Cadence</button>
          </form>
        </div>

        <div class="section">
          <button class="btn btn-secondary btn-block" id="create-cadence-btn">
            + Create Quick Cadence
          </button>
        </div>
      </div>
    </div>

    <!-- Notifications -->
    <div id="notification" class="notification hidden">
      <span id="notification-message"></span>
    </div>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
