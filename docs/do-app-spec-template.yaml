# DigitalOcean App Platform Spec Template
# Copy this file and fill in your secrets - DO NOT commit the filled version!
#
# Usage:
#   1. Copy to: my-app-spec.yaml (this will be gitignored)
#   2. Fill in actual values for all ${PLACEHOLDER} entries
#   3. Deploy with: doctl apps create --spec my-app-spec.yaml
#
# IMPORTANT: Never commit files with actual API keys or passwords!

name: outreach-platform
region: nyc

services:
  - name: front
    github:
      repo: your-org/OutreachGlobal
      branch: main
      deploy_on_push: true
    source_dir: apps/front
    build_command: pnpm install && pnpm build
    run_command: pnpm start
    http_port: 3000
    instance_count: 1
    instance_size_slug: basic-xs

    envs:
      # Database (get from DigitalOcean Managed Database)
      - key: DATABASE_URL
        value: "${DATABASE_URL}"
        type: SECRET

      # Authentication
      - key: NEXTAUTH_SECRET
        value: "${NEXTAUTH_SECRET}"
        type: SECRET
      - key: NEXTAUTH_URL
        value: "${APP_URL}"

      # AI Services
      - key: ANTHROPIC_API_KEY
        value: "${ANTHROPIC_API_KEY}"
        type: SECRET
      - key: OPENAI_API_KEY
        value: "${OPENAI_API_KEY}"
        type: SECRET

      # SMS (SignalHouse)
      - key: SIGNALHOUSE_API_KEY
        value: "${SIGNALHOUSE_API_KEY}"
        type: SECRET
      - key: SIGNALHOUSE_PHONE_NUMBER
        value: "${SIGNALHOUSE_PHONE_NUMBER}"

      # Voice (Twilio)
      - key: TWILIO_ACCOUNT_SID
        value: "${TWILIO_ACCOUNT_SID}"
        type: SECRET
      - key: TWILIO_AUTH_TOKEN
        value: "${TWILIO_AUTH_TOKEN}"
        type: SECRET
      - key: TWILIO_PHONE_NUMBER
        value: "${TWILIO_PHONE_NUMBER}"

      # Email (SendGrid)
      - key: SENDGRID_API_KEY
        value: "${SENDGRID_API_KEY}"
        type: SECRET
      - key: SENDGRID_FROM_EMAIL
        value: "${SENDGRID_FROM_EMAIL}"

      # Data Enrichment
      - key: APOLLO_IO_API_KEY
        value: "${APOLLO_IO_API_KEY}"
        type: SECRET
      - key: REALESTATE_API_KEY
        value: "${REALESTATE_API_KEY}"
        type: SECRET

      # Storage (DigitalOcean Spaces)
      - key: DO_SPACES_KEY
        value: "${DO_SPACES_KEY}"
        type: SECRET
      - key: DO_SPACES_SECRET
        value: "${DO_SPACES_SECRET}"
        type: SECRET
      - key: DO_SPACES_BUCKET
        value: "${DO_SPACES_BUCKET}"
      - key: DO_SPACES_REGION
        value: nyc3
      - key: DO_SPACES_ENDPOINT
        value: https://nyc3.digitaloceanspaces.com

      # App Config
      - key: NEXT_PUBLIC_APP_NAME
        value: "${APP_NAME}"
      - key: NEXT_PUBLIC_APP_URL
        value: "${APP_URL}"
      - key: NODE_ENV
        value: production

databases:
  - name: db
    engine: PG
    version: "15"
    size: db-s-1vcpu-1gb
    num_nodes: 1
